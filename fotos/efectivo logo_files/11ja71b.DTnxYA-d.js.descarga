import"./bygoogle.Bed_5_Ow.js";import{r as y,N as E,E as w,q as L,x as T,c as A,a as z,s as I}from"./index.C0E06kAA.js";import{o as R}from"./share-url.BAaOjdXQ.js";import{p as q,h as m}from"./hue.T4qInz5d.js";import{a2 as B}from"./reactivity.esm-bundler.CbH3adap.js";import"./prf-down.GhuXs7aK.js";import"./video.D6o4kNQO.js";import"./nav.DAUl1Ecm.js";import"./11ja71b.BRyU-eOw.js";import"./11ja71b.BBYQ8sWb.js";import"./client.BLMh3ImB.js";import"./searchbar.D1PdOxVb.js";import"./howto.Cb5JgmgA.js";import"./client.-Fi8vpRM.js";import"./client.BgCBJ-zL.js";import"./usePosition.Csgy7OJ-.js";import"./index.DFBB0eqO.js";import"./scroll.B1kfgMrT.js";import"./core.ei64eM1E.js";function D(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}D.g=e}function W(e,n){if(!e)return;const t=document.getElementById(n)||document.createElement("iframe");t.id=n,t.src=e,document.body.appendChild(t)}function j(){if(!__DATA__.isBot){const{id:e,type:n}=s;y.get("/api/statistics/view",{id:e,type:n}),n=="1"?y.get("/api/statistics/detail-out-view",{id:e}):n=="5"&&q("font_detail",1,"come")}}const s=window._getDetailData(),x=B({spin:!1}),_=()=>{x.spin=!1},v=e=>{_(),e&&window.open(e,"_blank")},F=()=>{L("rbg_id_type","".concat(s.id,"_").concat(s.type),{domain:".pngtree.com",expires:1}),v("/remove-background")},P={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function H(e,n,t){if(!e||x.spin)return;const i=s.one>0||s.limitedTime,o=()=>{if(__DATA__.enterpriseStatus==1)return;const r=+s.vipType;if(r==1&&__DATA__.trial)return w.emit("_amemn8","limitedTime",{onend:_,type:s.type,trial_price:!0}),!0;if(!i&&r>0){const p=__DATA__.vipType<=0;if(p||!p&&r==2)return _(),$app.dialog="upgrade-premium",!0}};if(!$app.checkIsLogin()){m("down-btnnologin-"+e);return}if(e==="remove-bg"){o()||(m("detail/ai-btn-remove-bg"),F());return}switch(x.spin=!0,m(P[e]),e){case"png":case"rar":case"ppt":case"twibbon":const r=e==="png";n&&i?v(n):w.emit("_amemn8","*",{onend:_,type:s.type,btnType:e,licenseType:s.vipType||0,href:n,downUrl:n,rarName:t||"PSD",fee:s.fee&&r});break;case"edit":n&&s.editips&&confirm(s.editips)&&(n=n.replace(/\/canvas\/?\?/,"/canvas/designer.html?")),v(n);break;case"freevideo":W(n,"down_ifr"),_();break;default:e==="premium"&&__DATA__.cookieLang!=="cht"?w.emit("_amemn8","plans",{onend:_,type:s.type}):v(n);break}}let $=!1;function O(e,n){if(!n||$)return;if(!$app.checkIsLogin()){m("downsizes-nologin-"+e);return}if(document.querySelector("._1rtuhfs")){$app.dialog="device-limit";return}const t=c=>{w.emit("_amemn8",c,{fee:c==="rar"?!0:void 0,onend:_,type:s.type}),m("downsizes-limit-"+e)},{vipType:i,down_count:o,enterpriseStatus:r,has_down:p}=__DATA__,{vipType:a}=s,f=o<=0,u=i==0;if(a==2&&r!=1){t("enterprise");return}if(u){t("plans");return}if([1,6,9].includes(+i)&&f){t("daily");return}if(p>200){t("max");return}const l=($toast==null?void 0:$toast.loading("Loading..."))||E,d=c=>{$=c,!c&&l()};d(!0);const b=c=>{c&&(d(!1),setTimeout(()=>{location.href=n+"&task_id="+c},100))};y.post("/api/ai-tools/img-enlarge",{id:s.id,multiple:e}).then(c=>{if(c.status==201)b(c.data.task_id);else if(c.status==200){const{task_id:S,md5:C}=c.data;h(S,C,0)}else $toast==null||$toast.error(c.info||"Error!"),d(!1)}).catch(()=>{d(!1),$toast==null||$toast.error("Error!")});function h(c,S,C){!c||C>=50||y.post("/api/ai-tools/img-enlarge-task",{id:s.id,task_id:c,md5:S,multiple:e}).then(k=>{k.status==200?b(k.data.task_id||c):setTimeout(()=>{h(c,S,++C)},5e3)}).catch(()=>{})}}T("_19z0z4b",()=>{const e={type:"",desc:""};return{loading:!1,err:"",form:{...e},errCls(n){return this.err===n?"_feqbc0":""},onSubmit(){if(this.loading)return;const n={...this.form},t=i=>{if(n[i].trim()==="")return this.err=i,!0};t("type")||t("desc")||(this.err="",this.loading=!0,y.post("/api/message/complaint",{complaint_type:n.type,content:n.desc,element_id:s.id,element_type:s.type}).then(i=>{this.loading=!1,i.rsp==200?($toast==null||$toast.success("Successful!"),this.$nextTick(()=>{$app.onDialog(""),setTimeout(()=>{this.form={...e}},300)})):$toast==null||$toast.error(i.info)}).catch(()=>{this.loading=!1,$toast==null||$toast.error("Error!")}))}}});T("_1r0qupz",e=>({tab:e.tab,prfLoading:!1,tabCls(n){return this.tab===n?"_c5516n":""},onTab(n){this.tab=n},licPrf(n){const t=this.$app;if(!t.tapLogin())return;const i=n==="enterprise",o=i?"team":"",r=s.one>0,{vipType:p,enterpriseStatus:a}=__DATA__,f=i?a!=1:p<=0;if(!r&&f)t.onDialog(i?"_5j84hy":"_1mbqn4s"),m("prfview-btn"+o);else if(!this.prfLoading){this.prfLoading=!0;const u=this._Refs.prfDown,l=()=>{this.prfLoading=!1};u.onshow({...u.getName(s.one,n),slidesdocs:!!s.slidesdocs,data:{action:"detail",id:s.id,type:s.type},resolve:l,reject:l}),m("prfdown-btn"+o)}}}));T("_1um5rr9",e=>({url:e.url,followed:e.is,loading:!1,onFollow(){const n=this.$app;!this.loading&&n.tapLogin()&&(this.loading=!0,y.post("/api/async/designer-follow",{id:e.uid}).then(t=>{this.loading=!1,t.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));T("_166ljwa",e=>{const n="_sstrbf";return{store:x,previewSpin:!1,videoSize:"",wordsExpand:e.is2xl,wordsCount:"+10",wordsFromCls:e.is2xl?"":n,showDownSizes:!1,get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(s.id,s.type),this.wordsCalc(!0),j()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=n,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,i=t&&t.parentElement;if(!i)return;i.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const i=this.$refs.wordsbtn,o=i&&i.parentElement;if(!o)return;const r=()=>{i.classList.remove("_1i3kt2s")};if(t&&e.is2xl){r();return}const p=o.children,a=p.length,f=p[a-1];if(a<=1||f&&f.offsetTop<=0)return;const u=(l,d)=>{if(this.wordsCount="+"+(a-1-d),o.insertBefore(i,l),i.offsetTop>0){const b="previousElementSibling";let h=i[b];for(;h&&h.offsetTop>0;)h=h[b];h&&u(h,d-1)}else o._btn=l,o._btni=d;r()};if(o._btn){u(o._btn,o._btni);return}for(let l=0;l<a;l++){const d=p[l];if(d.offsetTop>0){u(d,l);break}}},onDownld(t,i,o){H(t,i,o)},onDownSizes(t){this.showDownSizes=t!=null?t:!this.showDownSizes},sizesDownld(t){O(t,this.$refs.downld_png._xprops.u)},mDownld(){const t=this.$refs.image;s.type=="15"&&t?fetch(t.currentSrc||t.src,{mode:"cors"}).then(i=>i.blob()).then(i=>{const o=URL.createObjectURL(i),r=document.createElement("a");r.className="_zzqtmz _bdjirm",r.href=o,r.download="",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(o)},100)}).catch(()=>{$toast==null||$toast.error("Download Error!")}):I(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(t=!1){if(t){const f=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(f){z.dispatch(f,"click");return}}if(this.previewSpin)return;const i=this.$refs.imgLink,o=this.$refs.image;if(!i||!o)return;const r=i.href||o.currentSrc||o.src;if(!r)return;const p=()=>{w.emit("_kuxk9d",{src:r,width:i._nw,height:i._nh}),this.previewSpin=!1};if(this.previewSpin=!0,setTimeout(()=>{m("detail-preview-image")},80),i._nw){p();return}const a=new Image;a.onload=()=>{i._nw=a.naturalWidth,i._nh=a.naturalHeight,p()},a.onabort=a.onerror=()=>{this.previewSpin=!1,$toast==null||$toast.error("Load failed!")},a.decoding="async",a.src=r},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:s.id,type:s.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:s.id,type:s.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(s.id,s.type)},urlCopying:!1,onShareUrl(){A(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const i=this.$refs.image,o=i?i.currentSrc||i.src:N(s.shareimg);R({name:t,media:o,title:s.sharetit,word:s.shareword})},how2Attri(){const t=this._Refs.howToAttribute,i=this.$refs.lionName;t.onopen({type:s.type,url:location.pathname,usrName:i&&i.textContent||""})}}});function N(e){return/^https?:\/\//.test(e)?e:"https://png.pngtree.com"+e}const M=e=>e*(96/72);T("_e05maq",e=>({text:"",pt:e.pt,effectId:e.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(M(this.pt),"px")},get fontText(){return this.text||e.p},ptCls(n){return this.pt===n?"_4x0icu":"_1t7gxnv"},ptClick(n){this.pt=n},effectCls(n){return this.effectId===n?"_1abob5y":"_oqy7bn"},effectClick(n){this.effectId=n},"on:mounted"(){G(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const t=this.fontText.trim();if(!t)return;this.loading=!0;const i=()=>{this.loading=!1},o=this.$refs.spanTxt,r=o&&o.parentElement;if(!r)return;const p=this.$refs.canvas,a=getComputedStyle(o);w.emit("_h3jjzr",{styles:{left:o.offsetLeft,top:o.offsetTop+1.25,fontFamily:a.fontFamily,fontSize:parseInt(a.fontSize),fontWeight:a.fontWeight,fontStyle:a.fontStyle},effectId:this.effectId,text:t,textWidth:o.offsetWidth,canvasWidth:r.offsetWidth,canvasHeight:r.offsetHeight,cid:p.id,onok:i,onerr(){i(),$toast==null||$toast.error("Error!")}})}}}));function G(){const e=document.querySelector("style[data-font-style]");if(e&&e.sheet){const n=e.sheet.cssRules,t=n.length;for(let i=0;i<t;i++)V(n[i].cssText);e.parentElement.removeChild(e)}}let g;function V(e){g||(g=document.createElement("style"),document.head.appendChild(g),g.appendChild(document.createTextNode(""))),g.sheet&&g.sheet.insertRule(e,g.sheet.cssRules.length)}export{D as __vite_legacy_guard};
